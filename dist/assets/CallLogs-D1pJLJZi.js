import{j as e}from"./react-query-1zeL9f71.js";import{r as a}from"./react-vendor-BIu81k28.js";import{c as t,j as n,X as s,O as r,C as i,g as o,i as l,P as d,M as c,U as u,n as m,y as h,I as f,m as g,B as x,a as p,d as j,Q as v}from"./index-C2YmphIk.js";import{S as b,a as y,b as w,c as N,d as M}from"./select-D7yvCqdH.js";import{H as S,O as D,J as C,K as _,M as k,N as T,Q as W}from"./radix-overlays-68Wd_bDx.js";import{M as P}from"./message-square-DLm0ufib.js";import{C as E}from"./calendar-DCy-VCIY.js";import{M as A}from"./map-pin-XgcYfbjv.js";import{D as F}from"./download-C310cSUr.js";import"./radix-primitives-Di8eIdiq.js";import"./supabase-Ds_TnZEi.js";import"./react-router-BwMFiyVe.js";import"./radix-forms-KIAltt28.js";
/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=t("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),L=S,O=W,I=a.forwardRef(({className:a,...t},s)=>e.jsx(D,{className:n("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t,ref:s}));I.displayName=D.displayName;const V=r("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),X=a.forwardRef(({side:a="right",className:t,children:r,...i},o)=>e.jsxs(O,{children:[e.jsx(I,{}),e.jsxs(C,{ref:o,className:n(V({side:a}),t),...i,children:[r,e.jsxs(_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(s,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));X.displayName=C.displayName;const $=({className:a,...t})=>e.jsx("div",{className:n("flex flex-col space-y-2 text-center sm:text-left",a),...t});$.displayName="SheetHeader";const z=a.forwardRef(({className:a,...t},s)=>e.jsx(k,{ref:s,className:n("text-lg font-semibold text-foreground",a),...t}));z.displayName=k.displayName;function U(e){const a=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===a?new e.constructor(+e):"number"==typeof e||"[object Number]"===a||"string"==typeof e||"[object String]"===a?new Date(e):new Date(NaN)}a.forwardRef(({className:a,...t},s)=>e.jsx(T,{ref:s,className:n("text-sm text-muted-foreground",a),...t})).displayName=T.displayName;const Y=43200;let B={};function H(e){const a=U(e),t=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return t.setUTCFullYear(a.getFullYear()),+e-+t}function q(e,a){const t=U(e),n=U(a),s=t.getTime()-n.getTime();return s<0?-1:s>0?1:s}function J(e){return function(e,a){return e instanceof Date?new e.constructor(a):new Date(a)}(e,Date.now())}function Q(e){const a=U(e);return+function(e){const a=U(e);return a.setHours(23,59,59,999),a}(a)===+function(e){const a=U(e),t=a.getMonth();return a.setFullYear(a.getFullYear(),t+1,0),a.setHours(23,59,59,999),a}(a)}function G(e,a){const t=U(e),n=U(a),s=q(t,n),r=Math.abs(function(e,a){const t=U(e),n=U(a);return 12*(t.getFullYear()-n.getFullYear())+(t.getMonth()-n.getMonth())}(t,n));let i;if(r<1)i=0;else{1===t.getMonth()&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-s*r);let a=q(t,n)===-s;Q(U(e))&&1===r&&1===q(e,n)&&(a=!1),i=s*(r-Number(a))}return 0===i?0:i}function K(e,a,t){const n=function(e,a){return+U(e)-+U(a)}(e,a)/1e3;return(s=null==t?void 0:t.roundingMethod,e=>{const a=(s?Math[s]:Math.trunc)(e);return 0===a?0:a})(n);var s}const Z={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ee(e){return(a={})=>{const t=a.width?String(a.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const ae={date:ee({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ee({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ee({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},te={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function ne(e){return(a,t)=>{let n;if("formatting"===((null==t?void 0:t.context)?String(t.context):"standalone")&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,s=(null==t?void 0:t.width)?String(t.width):a;n=e.formattingValues[s]||e.formattingValues[a]}else{const a=e.defaultWidth,s=(null==t?void 0:t.width)?String(t.width):e.defaultWidth;n=e.values[s]||e.values[a]}return n[e.argumentCallback?e.argumentCallback(a):a]}}function se(e){return(a,t={})=>{const n=t.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],r=a.match(s);if(!r)return null;const i=r[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,a){for(let t=0;t<e.length;t++)if(a(e[t]))return t;return}(o,e=>e.test(i)):function(e,a){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&a(e[t]))return t;return}(o,e=>e.test(i));let d;d=e.valueCallback?e.valueCallback(l):l,d=t.valueCallback?t.valueCallback(d):d;return{value:d,rest:a.slice(i.length)}}}var re;const ie={code:"en-US",formatDistance:(e,a,t)=>{let n;const s=Z[e];return n="string"==typeof s?s:1===a?s.one:s.other.replace("{{count}}",a.toString()),(null==t?void 0:t.addSuffix)?t.comparison&&t.comparison>0?"in "+n:n+" ago":n},formatLong:ae,formatRelative:(e,a,t,n)=>te[e],localize:{ordinalNumber:(e,a)=>{const t=Number(e),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:ne({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:ne({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:ne({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:ne({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:ne({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(re={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,a={})=>{const t=e.match(re.matchPattern);if(!t)return null;const n=t[0],s=e.match(re.parsePattern);if(!s)return null;let r=re.valueCallback?re.valueCallback(s[0]):s[0];return r=a.valueCallback?a.valueCallback(r):r,{value:r,rest:e.slice(n.length)}}),era:se({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:se({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:se({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:se({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:se({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function oe(e,a,t){const n=B,s=(null==t?void 0:t.locale)??n.locale??ie,r=q(e,a);if(isNaN(r))throw new RangeError("Invalid time value");const i=Object.assign({},t,{addSuffix:null==t?void 0:t.addSuffix,comparison:r});let o,l;r>0?(o=U(a),l=U(e)):(o=U(e),l=U(a));const d=K(l,o),c=(H(l)-H(o))/1e3,u=Math.round((d-c)/60);let m;if(u<2)return(null==t?void 0:t.includeSeconds)?d<5?s.formatDistance("lessThanXSeconds",5,i):d<10?s.formatDistance("lessThanXSeconds",10,i):d<20?s.formatDistance("lessThanXSeconds",20,i):d<40?s.formatDistance("halfAMinute",0,i):d<60?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",1,i):0===u?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",u,i);if(u<45)return s.formatDistance("xMinutes",u,i);if(u<90)return s.formatDistance("aboutXHours",1,i);if(u<1440){const e=Math.round(u/60);return s.formatDistance("aboutXHours",e,i)}if(u<2520)return s.formatDistance("xDays",1,i);if(u<Y){const e=Math.round(u/1440);return s.formatDistance("xDays",e,i)}if(u<86400)return m=Math.round(u/Y),s.formatDistance("aboutXMonths",m,i);if(m=G(l,o),m<12){const e=Math.round(u/Y);return s.formatDistance("xMonths",e,i)}{const e=m%12,a=Math.trunc(m/12);return e<3?s.formatDistance("aboutXYears",a,i):e<9?s.formatDistance("overXYears",a,i):s.formatDistance("almostXYears",a+1,i)}}function le({call:a}){var t,n;return e.jsx(i,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[e.jsxs(l,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>{window.location.href=`tel:${a.from_e164}`},children:[e.jsx(d,{className:"w-4 h-4"}),"Call Back"]}),e.jsxs(l,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>{const e=encodeURIComponent("Thank you for calling TradeLine 24/7. How can we assist you further?");window.location.href=`sms:${a.from_e164}?body=${e}`},children:[e.jsx(P,{className:"w-4 h-4"}),"Text"]}),e.jsxs(l,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>{var e;const t=encodeURIComponent("TradeLine 24/7 - Call Follow-up"),n=encodeURIComponent(`Hi,\n\nThank you for your recent call to TradeLine 24/7.\n\n${a.transcript||""}`),s=(null==(e=a.captured_fields)?void 0:e.email)||"";window.location.href=`mailto:${s}?subject=${t}&body=${n}`},disabled:!(null==(t=a.captured_fields)?void 0:t.email),children:[e.jsx(c,{className:"w-4 h-4"}),"Email"]}),e.jsxs(l,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>{var e,t;const n=(null==(e=a.captured_fields)?void 0:e.name)||"Unknown",s=`BEGIN:VCARD\nVERSION:3.0\nFN:${n}\nTEL;TYPE=CELL:${a.from_e164}\n${(null==(t=a.captured_fields)?void 0:t.email)?`EMAIL:${a.captured_fields.email}`:""}\nEND:VCARD`,r=new Blob([s],{type:"text/vcard"}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=`${n.replace(/\s+/g,"_")}.vcf`,o.click()},children:[e.jsx(u,{className:"w-4 h-4"}),"Save"]}),e.jsxs(l,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>{var e;const t=`BEGIN:VCALENDAR\nVERSION:2.0\nBEGIN:VEVENT\nDTSTART:${((null==(e=a.captured_fields)?void 0:e.preferred_date)||(new Date).toISOString()).replace(/[-:]/g,"")}\nSUMMARY:TradeLine 24/7 - Follow-up\nDESCRIPTION:${a.transcript||""}\nEND:VEVENT\nEND:VCALENDAR`,n=new Blob([t],{type:"text/calendar"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download="event.ics",r.click()},children:[e.jsx(E,{className:"w-4 h-4"}),"Calendar"]}),e.jsxs(l,{variant:"outline",size:"sm",className:"gap-2",onClick:()=>{var e;const t=(null==(e=a.captured_fields)?void 0:e.address)||"";t&&window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t)}`,"_blank")},disabled:!(null==(n=a.captured_fields)?void 0:n.address),children:[e.jsx(A,{className:"w-4 h-4"}),"Map"]})]})})})}function de(){const[t,n]=a.useState([]),[s,r]=a.useState([]),[c,u]=a.useState(null),[S,D]=a.useState(!0),[C,_]=a.useState(""),[k,T]=a.useState("all"),[W,E]=a.useState("all"),{toast:A}=m();a.useEffect(()=>{O();const e=h.channel("call_logs_changes").on("postgres_changes",{event:"*",schema:"public",table:"call_logs"},()=>{O()}).subscribe();return()=>{h.removeChannel(e)}},[]),a.useEffect(()=>{let e=[...t];C&&(e=e.filter(e=>e.from_e164.includes(C)||e.to_e164.includes(C)||e.call_sid.includes(C))),"all"!==k&&(e=e.filter(e=>e.status===k)),"all"!==W&&(e=e.filter(e=>e.mode===W)),r(e)},[t,C,k,W]);const O=async()=>{try{const{data:e,error:a}=await h.from("call_logs").select("*").order("started_at",{ascending:!1}).limit(100);if(a)throw a;n(e||[])}catch(e){A({title:"Failed to load calls",description:e.message,variant:"destructive"})}finally{D(!1)}},I=e=>{switch(e){case"completed":return"bg-[hsl(142,85%,25%)]";case"failed":return"bg-red-700";case"busy":return"bg-amber-600";case"no-answer":return"bg-orange-600";default:return"bg-gray-600"}};return S?e.jsx("div",{className:"container max-w-7xl py-8",children:"Loading..."}):e.jsxs("div",{className:"container max-w-7xl py-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Call Logs"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"View and manage all incoming call records"})]}),e.jsxs(l,{onClick:()=>{const e=[["Call SID","From","To","Started","Duration","Status","Mode"].join(","),...s.map(e=>[e.call_sid,e.from_e164,e.to_e164,new Date(e.started_at).toISOString(),e.duration_sec||"0",e.status,e.mode||""].join(","))].join("\n"),a=new Blob([e],{type:"text/csv"}),t=URL.createObjectURL(a),n=document.createElement("a");n.href=t,n.download=`call-logs-${(new Date).toISOString().split("T")[0]}.csv`,n.click()},variant:"outline",className:"gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),"Export CSV"]})]}),e.jsx(i,{children:e.jsx(o,{className:"pt-6",children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(f,{placeholder:"Search by number or SID...",value:C,onChange:e=>_(e.target.value),className:"pl-9"})]}),e.jsxs(b,{value:k,onValueChange:T,children:[e.jsx(y,{children:e.jsx(w,{placeholder:"Filter by status"})}),e.jsxs(N,{children:[e.jsx(M,{value:"all",children:"All Statuses"}),e.jsx(M,{value:"completed",children:"Completed"}),e.jsx(M,{value:"failed",children:"Failed"}),e.jsx(M,{value:"busy",children:"Busy"}),e.jsx(M,{value:"no-answer",children:"No Answer"})]})]}),e.jsxs(b,{value:W,onValueChange:E,children:[e.jsx(y,{children:e.jsx(w,{placeholder:"Filter by mode"})}),e.jsxs(N,{children:[e.jsx(M,{value:"all",children:"All Modes"}),e.jsx(M,{value:"llm",children:"LLM"}),e.jsx(M,{value:"bridge",children:"Bridge"})]})]})]})})}),e.jsxs("div",{className:"grid gap-4",children:[s.map(a=>{return e.jsx(i,{className:"cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>u(a),children:e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[e.jsx("div",{className:`w-2 h-12 rounded ${I(a.status)}`,"aria-hidden":"true",role:"presentation"}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-mono font-medium",children:a.from_e164}),e.jsx("span",{className:"text-muted-foreground",children:"â†’"}),e.jsx("span",{className:"font-mono",children:a.to_e164})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(g,{className:"w-3 h-3"}),(t=new Date(a.started_at),n={addSuffix:!0},oe(t,J(t),n))]}),a.duration_sec&&e.jsxs("span",{children:[Math.floor(a.duration_sec/60),"m ",a.duration_sec%60,"s"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.mode&&e.jsx(x,{variant:"outline",children:"llm"===a.mode?"ðŸ¤– LLM":"ðŸ“ž Bridge"}),a.handoff&&e.jsx(x,{variant:"outline",className:"bg-orange-50",children:"Handoff"}),e.jsx(x,{variant:"secondary",children:a.status})]})]})})},a.id);var t,n}),0===s.length&&e.jsx(i,{children:e.jsx(o,{className:"py-12 text-center text-muted-foreground",children:"No calls found matching your filters"})})]}),e.jsx(L,{open:!!c,onOpenChange:()=>u(null),children:e.jsx(X,{className:"sm:max-w-2xl overflow-y-auto",children:c&&e.jsxs(e.Fragment,{children:[e.jsx($,{children:e.jsx(z,{children:"Call Details"})}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs(i,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-base",children:"Call Information"})}),e.jsxs(o,{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Call SID:"}),e.jsx("span",{className:"font-mono text-xs",children:c.call_sid})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"From:"}),e.jsx("span",{className:"font-mono",children:c.from_e164})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"To:"}),e.jsx("span",{className:"font-mono",children:c.to_e164})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsx(x,{variant:"secondary",children:c.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),e.jsx("span",{children:c.duration_sec?`${Math.floor(c.duration_sec/60)}m ${c.duration_sec%60}s`:"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("span",{className:"text-muted-foreground",children:"Mode:"}),e.jsx(x,{variant:"outline",children:"llm"===c.mode?"ðŸ¤– LLM":"ðŸ“ž Bridge"})]})]})]}),c.recording_url&&e.jsxs(i,{children:[e.jsx(p,{children:e.jsxs(j,{className:"text-base flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4"}),"Recording"]})}),e.jsxs(o,{children:[e.jsx("audio",{controls:!0,className:"w-full",children:e.jsx("source",{src:c.recording_url})}),e.jsx(l,{variant:"outline",size:"sm",className:"mt-2 w-full",onClick:()=>window.open(c.recording_url,"_blank"),children:"Open in New Tab"})]})]}),c.transcript&&e.jsxs(i,{children:[e.jsx(p,{children:e.jsxs(j,{className:"text-base flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"}),"Transcript"]})}),e.jsx(o,{children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("p",{className:"whitespace-pre-wrap",children:c.transcript})})})]}),c.captured_fields&&Object.keys(c.captured_fields).length>0&&e.jsxs(i,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-base",children:"Captured Information"})}),e.jsx(o,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[Object.entries(c.captured_fields).slice(0,5).map(([a,t])=>e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("span",{className:"text-muted-foreground capitalize",children:[a.replace(/_/g," "),":"]}),e.jsx("span",{className:"font-medium",children:t})]},a)),void 0!==c.capture_completeness&&e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Completeness:"}),e.jsxs(x,{variant:"outline",children:[c.capture_completeness,"%"]})]})})]})})]}),c.summary&&e.jsxs(i,{children:[e.jsx(p,{children:e.jsx(j,{className:"text-base",children:"Summary"})}),e.jsx(o,{children:e.jsx("p",{className:"text-sm",children:c.summary})})]}),e.jsx(le,{call:c})]})]})})})]})}export{de as default};
