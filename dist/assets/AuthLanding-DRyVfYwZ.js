import{j as e}from"./react-query-1zeL9f71.js";import{r as s}from"./react-vendor-BIu81k28.js";import{D as a,E as t,L as r,I as i,i as l,r as n,A as m,o as c,s as o,z as d,y as u}from"./index-C2YmphIk.js";import{u as x}from"./react-router-BwMFiyVe.js";import"./radix-primitives-Di8eIdiq.js";import"./radix-overlays-68Wd_bDx.js";import"./supabase-Ds_TnZEi.js";import"./radix-forms-KIAltt28.js";const p=c({businessName:o().trim().min(2,"Business name must be at least 2 characters").max(100,"Business name too long"),email:o().trim().email("Please enter a valid email address").max(255,"Email too long")});function h(){const[c,o]=s.useState(""),[h,j]=s.useState(""),[v,N]=s.useState(!1),[y,b]=s.useState(null),[f,g]=s.useState({}),S=x();return e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Start Your Free 14-Day Trial"}),e.jsx("p",{className:"mb-8 text-muted-foreground",children:"No credit card required. Get full access to all features."}),y&&e.jsx(a,{variant:"destructive",className:"mb-6",children:e.jsx(t,{children:y})}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),b(null),g({});const s=p.safeParse({businessName:c,email:h});if(!s.success){const e={};return s.error.issues.forEach(s=>{const a=s.path[0];e[a]=s.message}),void g(e)}if(d){N(!0);try{const e={name:c,email:h.toLowerCase(),company:c,notes:"Trial signup from AuthLanding",source:"trial_landing_page"},{error:s}=await u.from("leads").insert(e);if(s)throw s;S(`${m.auth}?email=${encodeURIComponent(h)}&trial=true`)}catch(a){console.error("Trial signup error:",a),b(a.message||"Failed to start trial. Please try again."),N(!1)}}else b("Authentication service is currently unavailable. Please try again later.")},noValidate:!0,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"businessName",children:["Business Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(i,{id:"businessName",type:"text",placeholder:"Your Company Inc.",value:c,onChange:e=>o(e.target.value),required:!0,disabled:v,className:f.businessName?"border-destructive":""}),f.businessName&&e.jsx("p",{className:"text-sm text-destructive",children:f.businessName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(r,{htmlFor:"email",children:["Email Address ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(i,{id:"email",type:"email",placeholder:"you@company.com",value:h,onChange:e=>j(e.target.value),required:!0,disabled:v,className:f.email?"border-destructive":""}),f.email&&e.jsx("p",{className:"text-sm text-destructive",children:f.email})]}),e.jsxs(l,{type:"submit",variant:"success",size:"lg",className:"w-full",disabled:v||!c||!h,children:[v&&e.jsx(n,{className:"mr-2 h-4 w-4 animate-spin"}),"Start My 14-Day Trial"]}),e.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:()=>S(m.auth),className:"text-primary hover:underline font-medium",disabled:v,children:"Sign in"})]})]})]})})}export{h as default};
