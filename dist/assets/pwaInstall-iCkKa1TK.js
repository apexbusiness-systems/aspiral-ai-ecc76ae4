const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PWAInstallBanner-DB7p3zsP.js","assets/react-query-1zeL9f71.js","assets/react-vendor-BIu81k28.js","assets/index-C2YmphIk.js","assets/radix-primitives-Di8eIdiq.js","assets/radix-overlays-68Wd_bDx.js","assets/supabase-Ds_TnZEi.js","assets/react-router-BwMFiyVe.js","assets/radix-forms-KIAltt28.js","assets/index-Bh3aufmq.css","assets/download-C310cSUr.js"])))=>i.map(i=>d[i]);
import{e,_ as t}from"./index-C2YmphIk.js";import"./react-vendor-BIu81k28.js";import"./react-query-1zeL9f71.js";import"./radix-primitives-Di8eIdiq.js";import"./radix-overlays-68Wd_bDx.js";import"./supabase-Ds_TnZEi.js";import"./react-router-BwMFiyVe.js";import"./radix-forms-KIAltt28.js";let n=null;function r(){window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),n=e,window.dispatchEvent(new CustomEvent("tl247:pwa-ready",{detail:{prompt:n}}))}),window.addEventListener("tl247:pwa-ready",()=>{!function(){if(document.querySelector("#pwa-install-banner"))return;const e=document.createElement("div");e.id="pwa-install-banner",document.body.appendChild(e),t(async()=>{const{PWAInstallBanner:e}=await import("./PWAInstallBanner-DB7p3zsP.js");return{PWAInstallBanner:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])).then(({PWAInstallBanner:t})=>{const n=require("react"),{createRoot:r}=require("react-dom/client");r(e).render(n.createElement(t))})}()})}function a(){return n}async function o(){if(!n)return!1;try{n.prompt();const{outcome:e}=await n.userChoice;if("accepted"===e)return n=null,function(){const e=document.querySelector("#pwa-install-banner");e&&e.remove()}(),!0}catch(t){e.report({type:"error",message:`PWA install failed: ${t}`,stack:t instanceof Error?t.stack:void 0,timestamp:(new Date).toISOString(),url:window.location.href,userAgent:navigator.userAgent,environment:e.getEnvironment()})}return!1}export{a as getPWAPrompt,r as initPWAInstall,o as installPWA};
