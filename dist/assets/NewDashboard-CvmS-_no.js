import{j as e}from"./react-query-1zeL9f71.js";import{r as s,b as a}from"./react-vendor-BIu81k28.js";import{c as t,C as r,a as i,d as n,g as l,m as c,i as o,y as d,e as m,P as x,a2 as h,a3 as u,j as p,X as f,a4 as g,J as j,a5 as v,V as N,L as y,I as b,W as w,a6 as k,a7 as C,a8 as S,a9 as R,f as A,B as D,a0 as E,A as _,aa as L,Y as I,S as M}from"./index-C2YmphIk.js";import{S as O,u as F}from"./ClientDashboard-Cnt1_E9f.js";import{C as q}from"./calendar-DCy-VCIY.js";import{C as T}from"./circle-check-s2OpOxn4.js";import{O as z,J as $,K as P,M as W,N as H,Q as V,H as G,a as Q,d as Y,g as B,m as K,U,j as J,k as X,W as Z,X as ee}from"./radix-overlays-68Wd_bDx.js";import{a as se,P as ae,b as te}from"./radix-primitives-Di8eIdiq.js";import{S as re}from"./switch-Q96SPJnB.js";import{H as ie}from"./house-D4CF2khR.js";import{u as ne}from"./react-router-BwMFiyVe.js";import"./supabase-Ds_TnZEi.js";import"./radix-forms-KIAltt28.js";import"./refresh-cw-BNU7USx8.js";
/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=t("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),ce=t("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),oe=t("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),de=t("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),me=t("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),xe=t("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),he=t("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),ue=t("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),pe=({nextItems:s=[],isLoading:a=!1})=>e.jsxs(r,{className:"border-0",style:{boxShadow:"var(--premium-shadow-subtle)",background:"linear-gradient(135deg, hsl(var(--card) / 0.95) 0%, hsl(var(--card) / 0.9) 100%)"},"data-testid":"next-actions-card",children:[e.jsxs(i,{className:"pb-4",children:[e.jsx(n,{className:"text-lg font-semibold text-foreground",children:"Today's appointments"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upcoming calls and meetings"})]}),e.jsxs(l,{children:[e.jsx("div",{className:"text-xs text-muted-foreground/80 mb-3",children:"Tap to confirm or move an appointment."}),a?e.jsx("div",{className:"space-y-3",children:Array.from({length:2}).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-card/50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(O,{className:"h-4 w-20"}),e.jsx(O,{className:"h-4 w-32"}),e.jsx(O,{className:"h-4 w-16"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(O,{className:"h-6 w-16"}),e.jsx(O,{className:"h-6 w-20"})]})]},a))}):s.length>0?e.jsx("div",{className:"space-y-3",children:s.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-card/50 rounded-lg border hover:bg-card/70 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(q,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.contact})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground",children:[e.jsx(c,{className:"h-3 w-3"}),e.jsx("span",{children:new Date(s.whenISO).toLocaleTimeString()})]})]}),e.jsx("div",{className:"flex space-x-2",children:s.actions.map(a=>e.jsx(o,{size:"sm",variant:"outline",onClick:()=>{s.id},className:"text-xs",children:a},a))})]},s.id))}):e.jsx("div",{className:"text-center text-muted-foreground/70 py-6",children:"Nothing queued right now."})]})]}),fe=()=>{const[a,t]=s.useState([]),[c,o]=s.useState(!0);s.useEffect(()=>{!async function(){try{const e=new Date;e.setDate(e.getDate()-7);const{data:s,error:a}=await d.from("analytics_events").select("*").in("event_type",["appointment_created","voice_call_completed","lead_captured"]).gte("created_at",e.toISOString()).order("created_at",{ascending:!1}).limit(5);if(a)throw a;t(s||[])}catch(e){m.report({type:"error",message:`Error fetching wins: ${e instanceof Error?e.message:String(e)}`,stack:e instanceof Error?e.stack:void 0,timestamp:(new Date).toISOString(),url:window.location.href,userAgent:navigator.userAgent,environment:m.getEnvironment()})}finally{o(!1)}}()},[]);const u=e=>"appointment_created"===e?"New booking":"voice_call_completed"===e?"Call completed":"lead_captured"===e?"Lead captured":"Activity",p=e=>{const s=new Date(e),a=(new Date).getTime()-s.getTime(),t=Math.floor(a/6e4);if(t<60)return`${t}m ago`;const r=Math.floor(t/60);if(r<24)return`${r}h ago`;return`${Math.floor(r/24)}d ago`};return e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsx(n,{className:"text-lg",children:"Recent Wins"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Good things happening this week"})]}),e.jsx(l,{children:c?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((s,a)=>e.jsxs("div",{className:"flex items-center space-x-3 p-2",children:[e.jsx(O,{className:"h-8 w-8 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(O,{className:"h-4 w-24"}),e.jsx(O,{className:"h-3 w-16"})]})]},a))}):a.length>0?e.jsx("div",{className:"space-y-3",children:a.map(s=>{const a=(t=s.event_type).includes("appointment")?T:t.includes("call")?x:h;var t;return e.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg hover:bg-accent/50 transition-colors",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(a,{className:"h-4 w-4 text-success dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:u(s.event_type)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:p(s.created_at)})]})]},s.id)})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your AI receptionist hasn't logged activity yet this week. Check back soon!"})})]})},ge=a.memo(()=>{const[a,t]=s.useState([{name:"Supabase",status:"operational",lastCheck:new Date},{name:"Twilio",status:"operational",lastCheck:new Date}]);s.useEffect(()=>{const e=async()=>{const e=new Date,s=[];try{const{error:a}=await d.from("analytics_events").select("id").limit(1);s.push({name:"Supabase",status:a?"down":"operational",lastCheck:e})}catch{s.push({name:"Supabase",status:"down",lastCheck:e})}try{const a=new Date(e.getTime()-3e5),{data:t,error:r}=await d.from("analytics_events").select("id").eq("event_type","voice_call_incoming").gte("created_at",a.toISOString()).limit(1);s.push({name:"Twilio",status:!r&&t?"operational":"degraded",lastCheck:e})}catch{s.push({name:"Twilio",status:"degraded",lastCheck:e})}t(s)};e();const s=setInterval(e,6e4);return()=>clearInterval(s)},[]);const i=a.every(e=>"operational"===e.status),n=a.some(e=>"down"===e.status);return e.jsx(r,{className:""+(i?"border-green-200 dark:border-green-800":n?"border-red-200 dark:border-red-800":"border-amber-200 dark:border-amber-800"),children:e.jsxs(l,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Service Health"}),i?e.jsxs("div",{className:"flex items-center gap-1 text-[hsl(142,85%,25%)] dark:text-green-400",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-[hsl(142,85%,25%)] animate-pulse","aria-hidden":"true"}),e.jsx("span",{className:"text-xs",children:"All systems operational"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-amber-800 dark:text-amber-400",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-amber-600 animate-pulse","aria-hidden":"true"}),e.jsx("span",{className:"text-xs",children:"Service issues detected"})]})]}),e.jsx("div",{className:"space-y-2",children:a.map(s=>{return e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[(a=s.status,"operational"===a?e.jsx(T,{className:"h-4 w-4 text-[hsl(142,85%,25%)]","aria-hidden":"true"}):"down"===a?e.jsx(ce,{className:"h-4 w-4 text-red-700","aria-hidden":"true"}):e.jsx(c,{className:"h-4 w-4 text-amber-700","aria-hidden":"true"})),e.jsx("span",{className:"text-muted-foreground",children:s.name})]}),e.jsx("span",{className:"text-xs "+("operational"===s.status?"text-[hsl(142,85%,25%)] dark:text-green-400":"down"===s.status?"text-red-700 dark:text-red-400":"text-amber-800 dark:text-amber-400"),children:"operational"===s.status?"Online":"down"===s.status?"Offline":"Degraded"})]},s.name);var a})})]})})}),je=({kpi:s,title:a,subtitle:t,icon:i,color:n,bgColor:c,ariaLabel:o,trend:d,badge:m})=>{return e.jsx(r,{className:"relative overflow-hidden border-0",style:{boxShadow:"var(--premium-shadow-subtle)",background:"linear-gradient(135deg, hsl(var(--card) / 0.95) 0%, hsl(var(--card) / 0.9) 100%)"},role:"article","aria-label":o,children:e.jsxs(l,{className:"p-3",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:`p-1.5 rounded-md ${c}`,children:e.jsx(i,{className:`h-3 w-3 ${n}`})}),d&&e.jsx("div",{className:"text-xs text-success dark:text-green-400 font-medium",children:d}),m&&e.jsx("div",{className:"px-2 py-0.5 rounded-full bg-green-100 dark:bg-green-900/30 text-success dark:text-green-300 text-xs font-medium",children:m})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xl font-bold text-foreground",children:(x=s.value,h=s.currency,h?`$${x.toLocaleString()}`:"answerRate"===s.id?`${x}%`:x.toString())}),e.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:a}),e.jsx("p",{className:"text-xs text-muted-foreground/70",children:t})]})]})});var x,h},ve={isWelcomeDialogOpen:!1,isSettingsDialogOpen:!1,isQuickActionDialogOpen:!1,selectedQuickAction:null,isRefreshing:!1,isSyncing:!1,selectedKpiId:null,selectedTranscriptId:null,sidebarCollapsed:!1,showNotifications:!1,notificationCount:0},Ne=u(e=>({...ve,setWelcomeDialogOpen:s=>e({isWelcomeDialogOpen:s}),setSettingsDialogOpen:s=>e({isSettingsDialogOpen:s}),setQuickActionDialog:(s,a=null)=>e({isQuickActionDialogOpen:s,selectedQuickAction:a}),setRefreshing:s=>e({isRefreshing:s}),setSyncing:s=>e({isSyncing:s}),setSelectedKpi:s=>e({selectedKpiId:s}),setSelectedTranscript:s=>e({selectedTranscriptId:s}),toggleSidebar:()=>e(e=>({sidebarCollapsed:!e.sidebarCollapsed})),setShowNotifications:s=>e(e=>({showNotifications:s,notificationCount:s?0:e.notificationCount})),incrementNotificationCount:()=>e(e=>({notificationCount:e.notificationCount+1})),clearNotificationCount:()=>e({notificationCount:0}),reset:()=>e(ve)})),ye=G,be=V,we=s.forwardRef(({className:s,...a},t)=>e.jsx(z,{ref:t,className:p("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));we.displayName=z.displayName;const ke=s.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(be,{children:[e.jsx(we,{}),e.jsxs($,{ref:r,className:p("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[a,e.jsxs(P,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ke.displayName=$.displayName;const Ce=({className:s,...a})=>e.jsx("div",{className:p("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});Ce.displayName="DialogHeader";const Se=({className:s,...a})=>e.jsx("div",{className:p("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});Se.displayName="DialogFooter";const Re=s.forwardRef(({className:s,...a},t)=>e.jsx(W,{ref:t,className:p("text-lg font-semibold leading-none tracking-tight",s),...a}));Re.displayName=W.displayName;const Ae=s.forwardRef(({className:s,...a},t)=>e.jsx(H,{ref:t,className:p("text-sm text-muted-foreground",s),...a}));Ae.displayName=H.displayName;var De="Radio",[Ee,_e]=Q(De),[Le,Ie]=Ee(De),Me=s.forwardRef((a,t)=>{const{__scopeRadio:r,name:i,checked:n=!1,required:l,disabled:c,value:o="on",onCheck:d,form:m,...x}=a,[h,u]=s.useState(null),p=se(t,e=>u(e)),f=s.useRef(!1),g=!h||(m||!!h.closest("form"));return e.jsxs(Le,{scope:r,checked:n,disabled:c,children:[e.jsx(ae.button,{type:"button",role:"radio","aria-checked":n,"data-state":Te(n),"data-disabled":c?"":void 0,disabled:c,value:o,...x,ref:p,onClick:Y(a.onClick,e=>{n||null==d||d(),g&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}),g&&e.jsx(qe,{control:h,bubbles:!f.current,name:i,value:o,checked:n,required:l,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});Me.displayName=De;var Oe="RadioIndicator",Fe=s.forwardRef((s,a)=>{const{__scopeRadio:t,forceMount:r,...i}=s,n=Ie(Oe,t);return e.jsx(te,{present:r||n.checked,children:e.jsx(ae.span,{"data-state":Te(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:a})})});Fe.displayName=Oe;var qe=s.forwardRef(({__scopeRadio:a,control:t,checked:r,bubbles:i=!0,...n},l)=>{const c=s.useRef(null),o=se(c,l),d=B(r),m=K(t);return s.useEffect(()=>{const e=c.current;if(!e)return;const s=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(s,"checked").set;if(d!==r&&a){const s=new Event("click",{bubbles:i});a.call(e,r),e.dispatchEvent(s)}},[d,r,i]),e.jsx(ae.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:o,style:{...n.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Te(e){return e?"checked":"unchecked"}qe.displayName="RadioBubbleInput";var ze=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$e="RadioGroup",[Pe,We]=Q($e,[U,_e]),He=U(),Ve=_e(),[Ge,Qe]=Pe($e),Ye=s.forwardRef((s,a)=>{const{__scopeRadioGroup:t,name:r,defaultValue:i,value:n,required:l=!1,disabled:c=!1,orientation:o,dir:d,loop:m=!0,onValueChange:x,...h}=s,u=He(t),p=J(d),[f,g]=X({prop:n,defaultProp:i??null,onChange:x,caller:$e});return e.jsx(Ge,{scope:t,name:r,required:l,disabled:c,value:f,onValueChange:g,children:e.jsx(Z,{asChild:!0,...u,orientation:o,dir:p,loop:m,children:e.jsx(ae.div,{role:"radiogroup","aria-required":l,"aria-orientation":o,"data-disabled":c?"":void 0,dir:p,...h,ref:a})})})});Ye.displayName=$e;var Be="RadioGroupItem",Ke=s.forwardRef((a,t)=>{const{__scopeRadioGroup:r,disabled:i,...n}=a,l=Qe(Be,r),c=l.disabled||i,o=He(r),d=Ve(r),m=s.useRef(null),x=se(t,m),h=l.value===n.value,u=s.useRef(!1);return s.useEffect(()=>{const e=e=>{ze.includes(e.key)&&(u.current=!0)},s=()=>u.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",s)}},[]),e.jsx(ee,{asChild:!0,...o,focusable:!c,active:h,children:e.jsx(Me,{disabled:c,required:l.required,checked:h,...d,...n,name:l.name,ref:x,onCheck:()=>l.onValueChange(n.value),onKeyDown:Y(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:Y(n.onFocus,()=>{var e;u.current&&(null==(e=m.current)||e.click())})})})});Ke.displayName=Be;var Ue=s.forwardRef((s,a)=>{const{__scopeRadioGroup:t,...r}=s,i=Ve(t);return e.jsx(Fe,{...i,...r,ref:a})});Ue.displayName="RadioGroupIndicator";var Je=Ye,Xe=Ke,Ze=Ue;const es=s.forwardRef(({className:s,...a},t)=>e.jsx(Je,{className:p("grid gap-2",s),...a,ref:t}));es.displayName=Je.displayName;const ss=s.forwardRef(({className:s,...a},t)=>e.jsx(Xe,{ref:t,className:p("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...a,children:e.jsx(Ze,{className:"flex items-center justify-center",children:e.jsx(g,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ss.displayName=Xe.displayName;const as=({open:a,onOpenChange:t})=>{const[r,i]=s.useState(1),[n,l]=s.useState(""),{setOnboardingCompleted:c,setPreferredName:d,setDashboardLayout:m,setTheme:x,updateLastLogin:h,theme:u,dashboardLayout:p,preferredName:f}=j(),{setTheme:g}=v(),[k,C]=s.useState(p||"comfortable"),[S,R]=s.useState(u||"system");s.useEffect(()=>{u&&R(u),p&&C(p),f&&l(f)},[u,p,f]);return e.jsx(ye,{open:a,onOpenChange:t,children:e.jsxs(ke,{className:"sm:max-w-[500px]",children:[e.jsx(Ce,{className:"sr-only",children:e.jsx(Re,{children:"Welcome"})}),(()=>{switch(r){case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-full",children:e.jsx(w,{className:"h-12 w-12 text-blue-500"})})}),e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx(Re,{className:"text-2xl font-bold",children:"Welcome to TradeLine247!"}),e.jsx(Ae,{className:"text-base text-slate-700 dark:text-slate-300",children:"Your AI receptionist is ready to help you capture every opportunity. Let's personalize your experience in just a few steps."})]})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx(Re,{className:"text-xl font-bold",children:"What should we call you?"}),e.jsx(Ae,{className:"text-slate-700 dark:text-slate-300",children:"We'll use this to personalize your dashboard greeting."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"name",children:"Preferred Name"}),e.jsx(b,{id:"name",placeholder:"Enter your name...",value:n,onChange:e=>l(e.target.value),className:"text-center text-lg",autoFocus:!0})]}),e.jsx("div",{className:"text-center text-sm text-slate-600 dark:text-slate-400",children:"Don't worry, you can change this anytime in settings."})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(he,{className:"h-10 w-10 text-blue-500"})}),e.jsx(Re,{className:"text-xl font-bold",children:"Choose Your Layout"}),e.jsx(Ae,{className:"text-slate-700 dark:text-slate-300",children:"How would you like your dashboard to look?"})]}),e.jsx(es,{value:k,onValueChange:e=>C(e),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(y,{htmlFor:"compact",className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent transition-colors",style:{borderColor:"compact"===k?"hsl(var(--primary))":"transparent"},children:[e.jsx(ss,{value:"compact",id:"compact"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Compact"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"More info in less space"})]})]}),e.jsxs(y,{htmlFor:"comfortable",className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent transition-colors",style:{borderColor:"comfortable"===k?"hsl(var(--primary))":"transparent"},children:[e.jsx(ss,{value:"comfortable",id:"comfortable"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Comfortable (Recommended)"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Balanced spacing and readability"})]})]}),e.jsxs(y,{htmlFor:"spacious",className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent transition-colors",style:{borderColor:"spacious"===k?"hsl(var(--primary))":"transparent"},children:[e.jsx(ss,{value:"spacious",id:"spacious"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Spacious"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Maximum breathing room"})]})]})]})})]});case 4:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(xe,{className:"h-10 w-10 text-blue-500"})}),e.jsx(Re,{className:"text-xl font-bold",children:"Pick Your Theme"}),e.jsx(Ae,{className:"text-slate-700 dark:text-slate-300",children:"Choose the appearance that works best for you."})]}),e.jsx(es,{value:S,onValueChange:e=>R(e),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(y,{htmlFor:"light",className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent transition-colors",style:{borderColor:"light"===S?"hsl(var(--primary))":"transparent"},children:[e.jsx(ss,{value:"light",id:"light"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Light"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Bright and clean"})]})]}),e.jsxs(y,{htmlFor:"dark",className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent transition-colors",style:{borderColor:"dark"===S?"hsl(var(--primary))":"transparent"},children:[e.jsx(ss,{value:"dark",id:"dark"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Dark"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Easy on the eyes"})]})]}),e.jsxs(y,{htmlFor:"system",className:"flex items-center space-x-3 p-4 border-2 rounded-lg cursor-pointer hover:bg-accent transition-colors",style:{borderColor:"system"===S?"hsl(var(--primary))":"transparent"},children:[e.jsx(ss,{value:"system",id:"system"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"System (Recommended)"}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Matches your device settings"})]})]})]})})]});default:return null}})(),e.jsx("div",{className:"flex justify-center gap-2 mt-6",children:Array.from({length:4}).map((s,a)=>e.jsx("div",{className:"h-2 w-2 rounded-full transition-all "+(a+1===r?"bg-primary w-6":a+1<r?"bg-primary/50":"bg-muted")},a))}),e.jsxs(Se,{className:"flex-row justify-between sm:justify-between",children:[r>1?e.jsx(o,{variant:"outline",onClick:()=>{r>1&&i(r-1)},children:"Previous"}):e.jsx("div",{}),r<4?e.jsx(o,{onClick:()=>{r<4&&i(r+1)},children:"Next"}):e.jsxs(o,{onClick:()=>{n&&d(n),m(k),x(S),g(S),c(!0),h(),t(!1)},className:"gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),"Complete Setup"]})]})]})})},ts=({kpisData:s=[],nextItemsCount:a=0,transcriptsCount:t=0})=>{const{recentActions:c,addRecentAction:d}=j(),m=(()=>{const e=[],t=(new Date).getHours();t>=9&&t<12&&e.push({id:"morning-check",icon:q,title:"Morning Routine",description:"Review your upcoming appointments for today to stay prepared.",action:"View Calendar",color:"text-info dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30"});const r=s.find(e=>"answerRate"===e.id);r&&r.value<80&&e.push({id:"improve-answer-rate",icon:x,title:"Boost Your Answer Rate",description:`Your answer rate is at ${r.value}%. Consider adjusting your AI settings to catch more calls.`,action:"Optimize Settings",color:"text-brand-primary dark:text-orange-400",bgColor:"bg-orange-100 dark:bg-orange-900/30"}),a>5&&e.push({id:"manage-appointments",icon:q,title:"Busy Schedule Ahead",description:`You have ${a} upcoming items. Review and prioritize to stay on track.`,action:"Review Schedule",color:"text-neutral dark:text-purple-400",bgColor:"bg-purple-100 dark:bg-purple-900/30"});const i=s.find(e=>"bookings"===e.id);return i&&i.deltaPct&&i.deltaPct>20&&e.push({id:"trending-up",icon:h,title:"Great Momentum!",description:`Bookings are up ${i.deltaPct}% this week. Keep up the excellent work!`,action:"View Insights",color:"text-success dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30"}),c.length<5&&e.push({id:"getting-started",icon:oe,title:"Getting Started",description:"Explore the Quick Actions menu to see what your AI receptionist can do.",action:"Explore Features",color:"text-amber-800 dark:text-yellow-400",bgColor:"bg-yellow-100 dark:bg-yellow-900/30"}),0===e.length&&e.push({id:"general-tip",icon:oe,title:"Pro Tip",description:"Review your recent call transcripts to identify common questions and improve your responses.",action:"View Transcripts",color:"text-info dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30"}),e.slice(0,2)})();return e.jsxs(r,{children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5 text-amber-700"}),e.jsx(n,{className:"text-lg",children:"Tips for You"})]})}),e.jsx(l,{className:"space-y-4",children:m.map(s=>{const a=s.icon;return e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.bgColor} shrink-0`,children:e.jsx(a,{className:`h-4 w-4 ${s.color}`})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:s.description})]}),e.jsxs(o,{variant:"link",size:"sm",className:"h-auto p-0 text-xs",onClick:()=>{return e=s.id,void d(`Clicked tip: ${e}`);var e},children:[s.action," â†’"]})]})]},s.id)})})]})},rs=()=>{const{theme:s,setTheme:t}=v(),{theme:r,setTheme:i}=j();a.useEffect(()=>{r&&r!==s&&t(r)},[r,s,t]);const n=e=>{t(e),i(e)};return e.jsxs(k,{children:[e.jsx(C,{asChild:!0,children:e.jsxs(o,{variant:"ghost",size:"icon",className:"h-9 w-9","aria-label":"Toggle theme",children:[e.jsx(ue,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(me,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]})}),e.jsxs(S,{align:"end",children:[e.jsxs(R,{onClick:()=>n("light"),children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Light"})]}),e.jsxs(R,{onClick:()=>n("dark"),children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Dark"})]}),e.jsxs(R,{onClick:()=>n("system"),children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"System"})]})]})]})};var is="horizontal",ns=["horizontal","vertical"],ls=s.forwardRef((s,a)=>{const{decorative:t,orientation:r=is,...i}=s,n=function(e){return ns.includes(e)}(r)?r:is,l=t?{role:"none"}:{"aria-orientation":"vertical"===n?n:void 0,role:"separator"};return e.jsx(ae.div,{"data-orientation":n,...l,...i,ref:a})});ls.displayName="Separator";var cs=ls;const os=s.forwardRef(({className:s,orientation:a="horizontal",decorative:t=!0,...r},i)=>e.jsx(cs,{ref:i,decorative:t,orientation:a,className:p("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",s),...r}));os.displayName=cs.displayName;const ds=({open:s,onOpenChange:a})=>{const{dashboardLayout:t,showWelcomeMessage:c,showQuickActions:o,showServiceHealth:d,showRecentActivity:m,enableNotifications:x,enableSoundEffects:h,notificationFrequency:u,showAnimations:p,reduceMotion:f,setDashboardLayout:g,toggleDashboardSection:v,setNotificationSettings:N,setDisplayPreferences:b}=j();return e.jsx(ye,{open:s,onOpenChange:a,children:e.jsxs(ke,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(Ce,{children:[e.jsx(Re,{children:"Dashboard Settings"}),e.jsx(Ae,{className:"text-slate-700 dark:text-slate-300",children:"Customize your dashboard experience"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsx(n,{className:"text-base",children:"Layout"}),e.jsx(A,{className:"text-slate-600 dark:text-slate-400",children:"Choose your preferred dashboard layout"})]}),e.jsx(l,{children:e.jsxs(es,{value:t,onValueChange:e=>g(e),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{value:"compact",id:"layout-compact"}),e.jsx(y,{htmlFor:"layout-compact",className:"cursor-pointer",children:"Compact"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{value:"comfortable",id:"layout-comfortable"}),e.jsx(y,{htmlFor:"layout-comfortable",className:"cursor-pointer",children:"Comfortable"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{value:"spacious",id:"layout-spacious"}),e.jsx(y,{htmlFor:"layout-spacious",className:"cursor-pointer",children:"Spacious"})]})]})})]}),e.jsx(os,{}),e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsx(n,{className:"text-base",children:"Dashboard Sections"}),e.jsx(A,{className:"text-slate-600 dark:text-slate-400",children:"Toggle visibility of dashboard components"})]}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:"welcome-message",className:"cursor-pointer",children:"Welcome Message"}),e.jsx(re,{id:"welcome-message",checked:c,onCheckedChange:()=>v("showWelcomeMessage")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:"quick-actions",className:"cursor-pointer",children:"Quick Actions"}),e.jsx(re,{id:"quick-actions",checked:o,onCheckedChange:()=>v("showQuickActions")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:"service-health",className:"cursor-pointer",children:"Service Health"}),e.jsx(re,{id:"service-health",checked:d,onCheckedChange:()=>v("showServiceHealth")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:"recent-activity",className:"cursor-pointer",children:"Recent Activity"}),e.jsx(re,{id:"recent-activity",checked:m,onCheckedChange:()=>v("showRecentActivity")})]})]})]}),e.jsx(os,{}),e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsx(n,{className:"text-base",children:"Notifications"}),e.jsx(A,{className:"text-slate-600 dark:text-slate-400",children:"Manage notification preferences"})]}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:"enable-notifications",className:"cursor-pointer",children:"Enable Notifications"}),e.jsx(re,{id:"enable-notifications",checked:x,onCheckedChange:e=>N({enableNotifications:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:"sound-effects",className:"cursor-pointer",children:"Sound Effects"}),e.jsx(re,{id:"sound-effects",checked:h,onCheckedChange:e=>N({enableSoundEffects:e})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Notification Frequency"}),e.jsxs(es,{value:u,onValueChange:e=>N({notificationFrequency:e}),children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{value:"all",id:"freq-all"}),e.jsx(y,{htmlFor:"freq-all",className:"cursor-pointer",children:"All notifications"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{value:"important",id:"freq-important"}),e.jsx(y,{htmlFor:"freq-important",className:"cursor-pointer",children:"Important only"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{value:"none",id:"freq-none"}),e.jsx(y,{htmlFor:"freq-none",className:"cursor-pointer",children:"None"})]})]})]})]})]}),e.jsx(os,{}),e.jsxs(r,{children:[e.jsxs(i,{children:[e.jsx(n,{className:"text-base",children:"Display"}),e.jsx(A,{className:"text-slate-600 dark:text-slate-400",children:"Adjust visual preferences"})]}),e.jsxs(l,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:"animations",className:"cursor-pointer",children:"Animations"}),e.jsx(re,{id:"animations",checked:p,onCheckedChange:e=>b({showAnimations:e})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{htmlFor:"reduce-motion",className:"cursor-pointer",children:"Reduce Motion"}),e.jsx(re,{id:"reduce-motion",checked:f,onCheckedChange:e=>b({reduceMotion:e})})]})]})]})]})]})})},ms=()=>{const a=ne(),[t,r]=s.useState(""),i=(new Date).getHours(),{preferredName:n,showWelcomeMessage:l,updateLastLogin:c}=j(),{isSettingsDialogOpen:x,setSettingsDialogOpen:h,notificationCount:u,setShowNotifications:p}=Ne();s.useEffect(()=>{c(),async function(){var e,s,a;try{const{data:{user:t},error:i}=await d.auth.getUser();if((null==(e=null==i?void 0:i.message)?void 0:e.includes("malformed"))||(null==(s=null==i?void 0:i.message)?void 0:s.includes("invalid")))return void m.report({type:"error",message:`[WelcomeHeader] Detected malformed token, ignoring: ${i.message}`,timestamp:(new Date).toISOString(),url:window.location.href,userAgent:navigator.userAgent,environment:m.getEnvironment()});if(t){const{data:e}=await d.from("profiles").select("full_name").eq("id",t.id).single();(null==e?void 0:e.full_name)?r(e.full_name):r((null==(a=t.email)?void 0:a.split("@")[0])||"there")}}catch(t){m.report({type:"error",message:`[WelcomeHeader] Error fetching user: ${t instanceof Error?t.message:String(t)}`,stack:t instanceof Error?t.stack:void 0,timestamp:(new Date).toISOString(),url:window.location.href,userAgent:navigator.userAgent,environment:m.getEnvironment()}),r("there")}}()},[c]);const f=n||t;return l?e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"space-y-4","data-testid":"welcome-header",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground tracking-tight",children:[i<12?"Good morning":i<18?"Good afternoon":"Good evening",", ",f||"there"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm sm:text-base",children:"Your AI receptionist is working hard for you today"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{variant:"ghost",size:"icon",onClick:()=>p(!0),className:"h-9 w-9 hover:bg-accent relative","aria-label":"View notifications",children:[e.jsx(le,{className:"h-4 w-4"}),u>0&&e.jsx(D,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:u>9?"9+":u})]}),e.jsx(rs,{}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>h(!0),className:"h-9 w-9 hover:bg-accent","data-testid":"settings-button","aria-label":"Open settings",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx(o,{variant:"ghost",size:"icon",onClick:()=>a(_.home),className:"h-9 w-9 hover:bg-accent","data-testid":"home-button","aria-label":"Go to homepage",children:e.jsx(ie,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-[hsl(142,85%,35%)] animate-pulse","aria-hidden":"true",role:"presentation"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"AI receptionist is active"})]})]}),e.jsx(ds,{open:x,onOpenChange:h})]}):null},xs=()=>{const{kpis:a,nextItems:t,transcripts:c,isLoading:o,hasData:d}=F(),{hasCompletedOnboarding:m,dashboardLayout:h,showQuickActions:u,showServiceHealth:p,showRecentActivity:f}=j(),{isWelcomeDialogOpen:g,setWelcomeDialogOpen:v}=Ne();s.useEffect(()=>{m||g||v(!0)},[m,g,v]);const N="compact"===h?"space-y-4":"spacious"===h?"space-y-8":"space-y-6",y="compact"===h?"gap-3":"spacious"===h?"gap-6":"gap-4";return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:N,children:[e.jsx(ms,{}),e.jsx("div",{className:`grid grid-cols-2 md:grid-cols-4 ${y}`,children:o?Array.from({length:4}).map((s,a)=>e.jsx(r,{className:"relative overflow-hidden border-0",children:e.jsxs(l,{className:"p-3",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsx(O,{className:"h-6 w-6 rounded-md"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(O,{className:"h-6 w-16"}),e.jsx(O,{className:"h-3 w-20"}),e.jsx(O,{className:"h-3 w-24"})]})]})},a)):d?a.map(s=>{const a=(e=>{const s={bookings:{title:"Bookings this week",subtitle:"New appointments scheduled",icon:q,color:"text-info dark:text-blue-400",bgColor:"bg-blue-100 dark:bg-blue-900/30",ariaLabel:"Weekly bookings performance"},payout:{title:"Expected payout",subtitle:"Revenue from active calls",icon:I,color:"text-success dark:text-green-400",bgColor:"bg-green-100 dark:bg-green-900/30",ariaLabel:"Expected revenue payout"},answerRate:{title:"Calls we caught",subtitle:"Answer rate this period",icon:x,color:"text-neutral dark:text-purple-400",bgColor:"bg-purple-100 dark:bg-purple-900/30",ariaLabel:"Call answer rate performance"},rescued:{title:"Missed but saved",subtitle:"Calls recovered by AI",icon:M,color:"text-brand-primary dark:text-orange-400",bgColor:"bg-orange-100 dark:bg-orange-900/30",ariaLabel:"Calls rescued from being missed"}};return s[e]||s.bookings})(s.id);return e.jsx(je,{kpi:s,...a,trend:s.deltaPct?s.deltaPct>0?`+${s.deltaPct}%`:`${s.deltaPct}%`:void 0},s.id)}):Array.from({length:4}).map((s,a)=>{const t=[{title:"Bookings this week",subtitle:"No appointments yet this week"},{title:"Expected payout",subtitle:"Revenue will calculate from calls"},{title:"Calls we caught",subtitle:"No calls received yet"},{title:"Missed but saved",subtitle:"No recovered calls yet"}];return e.jsx(r,{className:"relative overflow-hidden border-0 opacity-70 hover:opacity-90 transition-opacity",children:e.jsx(l,{className:"p-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground dark:text-foreground/60",children:"0"}),e.jsx("p",{className:"text-xs font-medium text-muted-foreground dark:text-foreground/80",children:t[a].title}),e.jsx("p",{className:"text-xs text-muted-foreground/70 dark:text-foreground/70",children:t[a].subtitle})]})})},a)})}),e.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-3 ${y}`,children:[e.jsxs("div",{className:`lg:col-span-2 ${N}`,children:[e.jsx(pe,{nextItems:t,isLoading:o}),f&&e.jsxs(r,{children:[e.jsx(i,{children:e.jsx(n,{className:"text-lg",children:"Recent Activity"})}),e.jsx(l,{children:o?e.jsx("div",{className:"space-y-3",children:Array.from({length:2}).map((s,a)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-card/50 rounded-lg",children:[e.jsx(O,{className:"h-8 w-8 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(O,{className:"h-4 w-32"}),e.jsx(O,{className:"h-3 w-full"}),e.jsx(O,{className:"h-3 w-24"})]})]},a))}):d&&c.length>0?e.jsx("div",{className:"space-y-3",children:c.map(s=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-card/50 rounded-lg border border-border/50 hover:bg-accent/50 transition-colors cursor-pointer",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg shrink-0",children:e.jsx(x,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-sm",children:s.caller}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.atISO).toLocaleDateString()})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.summary}),s.needsReply&&e.jsx("div",{className:"text-xs text-brand-primary dark:text-orange-400 font-medium",children:"Needs reply"})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8 space-y-3",children:[e.jsx("div",{className:"inline-flex p-3 rounded-full bg-muted/50 mb-2",children:e.jsx(x,{className:"h-6 w-6 text-muted-foreground"})}),e.jsx("p",{className:"font-medium text-foreground",children:"No activity yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your dashboard will populate once calls start coming in"})]})})]})]}),e.jsxs("div",{className:N,children:[e.jsx(fe,{}),e.jsx(ts,{kpisData:a,nextItemsCount:(null==t?void 0:t.length)||0,transcriptsCount:(null==c?void 0:c.length)||0}),u&&e.jsx(L,{}),p&&e.jsx(ge,{})]})]})]}),e.jsx(as,{open:g,onOpenChange:v})]})};export{xs as NewDashboard};
